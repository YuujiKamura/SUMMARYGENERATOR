# OCR単一画像テストツール (test_single_image.py)

このツールは、キャプションボード画像のOCR処理を個別にテストするためのコマンドラインツールです。

## 使用方法

### 1. 利用可能な画像リストを表示

```powershell
python test_single_image.py --list
```

利用可能なキャプションボード画像のリストを表示します。各画像にはインデックス番号（0から開始）とファイル名が表示されます。

### 2. インデックス番号で画像をテスト

```powershell
python test_single_image.py --index 5
```

指定されたインデックス番号（この例では5番）の画像をテストします。

### 3. 範囲指定で複数の画像をテスト

```powershell
# 範囲指定（1から5まで）
python test_single_image.py --range "1-5"

# カンマ区切り（0, 2, 4番）
python test_single_image.py --range "0,2,4"

# 複合形式（1-3と7-9）
python test_single_image.py --range "1-3,7-9"
```

範囲指定で複数の画像を連続してテストします。以下の形式が使用できます：
- `1-5`: インデックス1から5まで連続
- `0,2,4`: 個別のインデックスをカンマ区切り
- `1-3,7-9`: 範囲とカンマ区切りの組み合わせ

### 4. ファイル名で画像をテスト

```powershell
python test_single_image.py --filename "RIMG8596"
```

指定されたファイル名を含む画像をテストします。部分一致で検索されるので、完全なファイル名を入力する必要はありません。

## コマンドライン引数

| 引数 | 説明 |
|------|------|
| `-h, --help` | ヘルプメッセージを表示 |
| `-l, --list` | 利用可能な画像の一覧を表示 |
| `-i, --index INDEX` | テストする画像のインデックス番号（0から開始） |
| `-r, --range RANGE` | テストする画像のインデックス範囲（例: "1-5", "0,2,4", "1-3,7-9"） |
| `-f, --filename FILENAME` | テストする画像のファイル名（部分一致） |

## 出力内容

テストを実行すると、以下の情報が表示されます：

1. **画像情報**: ファイル名、パス、ロール、クラス、画像サイズ
2. **OCRテキストボックス**: 抽出されたすべてのテキストとその座標
3. **ペアマッチング結果**: キーワードと値のペア検出結果
4. **抽出結果**: 日付・台数、測点名称などの構造化された情報
5. **AAレイアウト**: テキストの配置を視覚的に表示

## 例

```powershell
# 利用可能な画像を確認
python test_single_image.py --list

# インデックス0番の画像をテスト
python test_single_image.py --index 0

# 複数の画像を範囲指定でテスト
python test_single_image.py --range "1-5"

# カンマ区切りで特定の画像をテスト
python test_single_image.py --range "0,5,10"

# RIMG8596を含むファイル名の画像をテスト
python test_single_image.py --filename "RIMG8596"
```

## 注意事項

- このツールはキャプションボード関連の画像のみを対象としています
- OCRキャッシュが存在する画像のみテスト可能です
- DocumentAI設定が正しく設定されている必要があります
